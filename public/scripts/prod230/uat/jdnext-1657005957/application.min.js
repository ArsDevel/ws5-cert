function JustDanceGame(){var e="0.2.0",v=$("html"),a=($("head"),$("body")),i=$("#landing"),o=$(".landing__content"),s=($(".init-spinner--splash"),$(".site-message"),$(".pop-up")),n=($("#maintenance"),$("#preloader")),g=$("#settings"),w=$("#landing-admin-menu"),t=$(".new-features"),c=$("#landing-modal"),l=($(".room-info"),$(".main-button"),$("#just-dance-now"),$("#coverflow")),d=!1,r="https://spice-marsh-haircut.glitch.me",m="https://cdn.glitch.global/2adec185-ab6f-4021-8ea5-7def5fae509c",_="visible",p="hidden";window=document.documentElement;const u=document.querySelector("select");u.addEventListener("change",function(){var e=u.value;location.href=window.location.pathname+"#"+e,location.reload()});let k=window.location.hash;k=k.substr(1),console.log("lang: "+k),["en","ru","fr","ja"].includes(k)||(location.href=window.location.pathname+"#en",location.reload()),localStorage.setItem("lang",k),u.value=k,v.attr("lang",k);var h=$(".landing-text__title"),f=$(".landing-text__subtitle"),y=$(".main-button span"),C=$(".messege__content p");h.html(loc[165][k]),f.html(loc[166][k]),y.html(loc[168][k]),C.html(loc[315][k]);new Howl({src:["//cdn.glitch.com/153e8a55-f8b3-4996-9032-7a331265a55d/m_jd4_pause.wav.mp3"]}),new Howl({src:["//cdn.glitch.com/153e8a55-f8b3-4996-9032-7a331265a55d/stg_jd2019_titlepage_tohowto_sfx.wav.mp3"]}),new Howl({src:["//cdn.glitch.me/153e8a55-f8b3-4996-9032-7a331265a55d/stg_jd2019_titlepage_todanceparty_sfx.wav.mp3"]});var b,S,T,I,L,x,A,D,F,E,U,q,H,M,j,N,O,J=new Howl({src:[m+"/UI_Search_a01.wav"]}),P=(new Howl({src:[m+"/UI_Lobby_ContinueDance.wav"]}),new Howl({src:[m+"/Jingle_JDMainMenu.wav"]}),new Howl({src:[m+"/UI_CoverFlow_Enter.wav"]}),new Howl({src:[m+"/UI_Snap_01.wav"]})),R=new Howl({src:[m+"/UI_Snap_Back_01.wav"]}),B=new Howl({src:[m+"/UI_TransitionPage.wav"]}),C="sfx-sprite",Y=new Howl({src:[m+"/"+C+".ogg",m+"/"+C+".mp3"],sprite:{"dance-transition-in":[0,3e3],"dance-transition-out":[3e3,2e3],"goldmove-intro":[4999,1729],goldmove:[6729,1683],"unlock-game":[8982,2410],"coach-selected-1":[11403,1067],"coach-selected-2":[12472,1067],"coach-selected-3":[13543,1067],"coach-selected-4":[14614,1067],"coach-selected-5":[15685,1067],"coach-selected-6":[16752,1066],"crowd-cheering":[17818,2957],"crowd-sad":[20775,1471],"coverflow-whoosh":[21854,1715],"coverflow-right":[23584,250],"coverflow-left":[23857,277],"avatar-appears-1":[24135,648],"avatar-appears-2":[24783,720],"avatar-appears-3":[25503,696],"avatar-appears-4":[26199,696],"flag-appears-1":[26895,528],"flag-appears-2":[27423,504],"flag-appears-3":[27927,504],"flag-appears-4":[28431,432],"coach-selection":[28863,2952],"ghost-planet-appears":[31815,1920],"score-count":[33735,5586],"after-dance-jingle":[39322,5856],"after-dance-winner":[45178,6624],"star-1":[51802,2040],"star-2":[53842,2040],"star-3":[55882,2040],"star-4":[57922,2544],"star-5":[60466,3048],snap:[63514,550],"coverflow-click":[64074,106],"coach-leave-1":[64190,920],"config-window-open":[65110,465],"config-window-close":[65592,225],"connect-info-pannel":[65834,666]},onload:function(){console.log("Audio SFX sprite has been successfully loaded")},onloaderror:function(){console.log("An error with Howler has occured ")}});function X(){R.play(),v.removeClass("dialog").removeClass("modalActive"),c.removeClass(_).hide(),A.removeClass(_)}function z(){var e;!1===d?function(){$('<div class="init-spinner--splash"><div class="splash-logo"></div><div class="splash-coaches"><div class="splash-coach-1 splash-coach-div"></div><div class="splash-coach-2 splash-coach-div"></div><div class="splash-coach-3 splash-coach-div"></div><div class="splash-coach-4 splash-coach-div"></div></div><div class="init-spinner"></div></div>');var e=$('<div class="init-spinner--splash"><div class="splash-logo"></div><div class="init-spinner"></div></div>');e.appendTo($("body")),e.appendTo(a).delay(2500).show(function(){e.remove()})}():(e=$('<div class="init-spinner--splash"><div class="init-spinner__spinner"></div></div>').appendTo($("body"))).appendTo(a).delay(2500).show(function(){e.remove()})}function G(){var e,o,s,n,t,a,i,c,l={width:window.innerWidth,height:window.innerHeight};v.addClass("desktop"),n=(o=l.width)/(s=l.height),(e=16/9)<n?(t=l.height,a=0,i=Math.round(s*e),c=Math.floor((o-i)/2)):(i=l.width,c=0,t=Math.round(o/e),a=Math.floor((s-t)/2)),$("#just-dance-now").css({width:i,marginLeft:c,height:t,marginTop:a}),$("html").css({fontSize:Math.round(i/1280*125)}),this.containerScale=i/1920,window.onresize=G}function Q(){const s=document.querySelectorAll(".song");s.forEach(function(o){o.addEventListener("click",function(){Y.play("coverflow-click");let e=o;s.forEach(function(e){e.classList.remove("song--focused")}),e.classList.add("song--focused")})});var e=$(".connect-phone-info");e.addClass("connect-phone-info--visible"),e.html(loc[342][k])}function W(){var e=$(".danceroom__number");$(".danceroom__label").html(loc[169][k]),e.append(localStorage.roomNr)}function K(){v.addClass("state-songselection"),$.getJSON(r+"/v1/songs/published",function(e){var s="";$.each(e,function(e,o){s+='                    <div class="song '+o.id+'">                    <div class="song__decoration song__tag">                    <img class="song__cover" src="'+o.base+"/assets/web/"+o.id.toLowerCase()+'_small.jpg">                    </div>                    <div class="title-container">                    <div class="caption title">'+o.name+'</div>                    <div class="caption artist">'+o.artist+"</div>                    </div>                    </div>"}),$.each(e,function(e,o){$(".song-cover--hi-res").css("background-image","url("+o.base+"/assets/web/"+o.id.toLowerCase()+".jpg)"),$(".song-cover--low-res").css("background-image","url("+o.base+"/assets/web/"+o.id.toLowerCase()+"_small.jpg)")}),$(".songlist--x").html(s),$(".category").attr("data-name","WEB PLAYLIST TEST");var o=0;$(document).keydown(function(e){switch(e.keyCode){case q:0<o&&$(".song").addClass("top");break;case H:o<52&&$(".song").addClass("bottom");break;case M:Y.play("coverflow-left"),o--,$(".song").removeClass("song--focused"),document.querySelector(".song:nth-child("+-o+")").classList.add("song--focused");break;case j:Y.play("coverflow-right"),o++,$(".song").removeClass("song--focused"),document.querySelector(".song:nth-child("+ +o+")").classList.add("song--focused")}})}),l.addClass(_)}console.log("Landing script Install"),function(){let e=$('<div id="second-screen" role="second-screen"><div class="title">LOC 344</div><div class="screenshots"><div class="items-list"><div class="screenshot map-mapID"><img src="https://placehold.jp/3d4070/ffffff/1024x512.png"> <span>Song Name #1</span></div><div class="screenshot map-mapID"><img src="https://placehold.jp/3d4070/ffffff/1024x512.png"> <span>Song Name #2</span></div><div class="screenshot map-mapID"><img src="https://placehold.jp/3d4070/ffffff/1024x512.png"> <span>Song Name #3</span></div><div class="screenshot map-mapID"><img src="https://placehold.jp/3d4070/ffffff/1024x512.png"> <span>Song Name #4</span></div></div><div class="title-more">[loc]And more...</div></div></div>');e.appendTo(a).hide();let o=0,s=$("#second-screen"),n=i.find(".landing-arrow");function t(){$("#second-screen").find(".title").html(loc[344][k])}n.on("click",function(){o=1,s.show(),v.addClass("second-screen"),i.css({transform:"translateY(-100%)",transition:"transform 0.5s ease"}),s.css({transform:"translateY(0%)",transition:"transform 0.5s ease"}),t()}),o=1,$(document).keydown(function(e){27===e.keyCode&&(i.css({transform:"translateY(0%)",transition:"transform 0.5s ease"}),s.css({transform:"translateY(100%)",transition:"transform 0.5s ease"}))}),t()}(),"0.2.0"===e?$('<div class="new_update"><div class="message">'+("New update "+e+" is out. Please update the Just Dance Now app on your device!")+"</div></div>").appendTo(o):console.error("The message is not shown"),window.onload=function(){let e=document.querySelector("html");!0===e?(e.classList.add("game0"),n.classList.add("done")):(e.classList.add("game-loaded"),n.remove())},function(){v.addClass("debug"),a.append('<div id="in-game-fps"><span id="fps-result"></span> FPS</div>');var s=document.getElementById("fps-result"),n=Date.now(),t=0,e=new UAParser;localStorage.setItem("device",JSON.stringify(e.getResult())),function e(){var o=Date.now();t++,1e3<o-n&&(s.innerHTML=(t/((o-n)/1e3)).toFixed(1),n=o,t=0),window.requestAnimationFrame(e)}(),console.log("debug: js animation"),(e=$("<div>").addClass("animation-play").appendTo(o)).html(loc[343][k]),e.on("click",function(){console.log("animation played")})}(),!0===d&&(v.addClass("weak"),$(".preload-assets").remove()),function(){function e(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}var o;$(".room-info span").html(loc[167][k]),s=22,o=9999,Math.floor(Math.random()*(o-s+1)+s),document.getElementById("room-number").innerHTML=1,new QRCode(document.getElementById("room-qrcode"),{text:r+":80/r?r=1",width:112,height:112,colorDark:"#800080",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.L}),localStorage.setItem("roomNr",1);var s={value:"s=1~hmac="+md5(1),expires:Date.now()};localStorage.setItem("room",JSON.stringify(s)),s={value:"s=EUS"+e()+"~hmac="+md5("EUS=1"),expires:Date.now()},localStorage.setItem("screen",JSON.stringify(s))}(),function(){var e=$(".new-features"),o='<div class="game-description">';o+='<div class="title">',o+="<span></span>",o+="</div>",o+='<div class="content"></div>',o+="</div>",o+='<div class="button__close">X</div>',e.html('<div class="game-description"><div class="title"><span></span></div><div class="content"></div></div><div class="button__close">X</div>');var s=e.find(".title"),o=e.find(".content");s.html(loc[313][k]),o.html(loc[314][k]),e=e.find(".button__close"),t.show(),e.on("click",function(){t.hide()})}(),F=$(".close__button"),s.addClass(_).removeClass(p),F.on("click",function(){s.removeClass(_).addClass(p)}),function(){var o=!1,e=$("#landing-admin-menu"),s=$(".menu__header"),n=e.find(".close"),t=s.find(".title h1"),a=$(".language-changer .title"),i=(m=$(".graphics-changer")).find(".title"),c=m.find('option[value="high"]'),l=m.find('option[value="medium"]'),d=m.find('option[value="low"]'),r=(p=$(".full-screen")).find(".title"),e=p.find(".check"),m=(s=$("a.legacy-item")).find(".authors"),p=s.find(".license"),s=s.find(".faq");function u(){R.play(),v.removeClass("dialog"),w.hide().removeClass(_)}t.html(loc[319][k]),a.html(loc[320][k]),i.html(loc[321][k]),c.html(loc[322][k]),d.html(loc[323][k]),l.html(loc[324][k]),r.html(loc[330][k]),e.html(loc.on[k]),m.html(loc[336][k]),p.html(loc[337][k]),s.html(loc[338][k]),g.on("click",function(){o=!0,P.play(),B.play(),v.addClass("dialog"),w.show().addClass(_)}),n.on("click",function(){o=!1,u()}),$(document).keydown(function(e){27===e.keyCode&&!0===o&&(o=!1,u())});var h=document.documentElement,f=!1;$(".full-screen .check").on("click",function(){!1===f?(h.requestFullscreen?h.requestFullscreen():h.webkitRequestFullscreen?h.webkitRequestFullscreen():h.msRequestFullscreen&&h.msRequestFullscreen(),f=!0,document.querySelector(".fullscreen-toggle").classList.add("active")):(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),f=!1,document.querySelector(".fullscreen-toggle").classList.remove("active")),v.toggleClass("full-screen")})}(),b=0,S=$("#landing-modal"),T=$(".modal__header"),I=$(".help__tutorial"),L=T.find(".title"),x=S.find(".close"),A=S.find(".modal_position"),D=S.find(".modal_position_1"),F=S.find(".modal_position_1 .modal_description"),E=S.find(".modal_position_2"),T=S.find(".modal_position_2 .modal_description"),U=S.find(".modal_position_3"),S=S.find(".modal_position_3 .modal_description"),I.html(loc[340][k]),L.html(loc[331][k]),F.html(loc[332][k]),T.html(loc[333][k]),S.html(loc[334][k]),I.on("click",function(){b=1,J.play(),P.play(),v.addClass("modalActive"),c.addClass(_).show(),setTimeout(()=>$(function(){D.addClass(_),B.play()}),500),setTimeout(()=>$(function(){E.addClass(_),B.play()}),1e3),setTimeout(()=>$(function(){U.addClass(_),B.play()}),1500)}),x.on("click",function(){b=0,X()}),$(document).keydown(function(e){27===e.keyCode&&1===b&&(b=0,X())}),$(".main-button").hover(function(){v.addClass("play-button-hover")},function(){v.removeClass("play-button-hover")}),setTimeout(function(){var e=$('<div class="cookie-wrapper"><div class="cookie-content"></div><div class="cookie-close"><button class="cookie-close-btn">OK</button></div></div>');v.addClass("adult"),console.log("%cAdult version","color:#f00;font-weight:bold"),$(".site-message").addClass("cookie-notice"),e.appendTo(".site-message");var o=$(".cookie-notice"),s=$(".cookie-content"),e=$(".cookie-close .cookie-close-btn");s.html(loc[341][k]),localStorage.setItem("cookieAccept","false");var n=!1;e.on("click",function(){localStorage.setItem("cookieAccept","true"),$.cookie("cookieAccept","true",{expires:3,path:"/"}),n=!0,o.remove()}),$(".main-button").on("click",function(){localStorage.setItem("cookieAccept","true"),$.cookie("cookieAccept","true",{expires:3,path:"/"}),n=!0,o.remove()}),!1===n&&$(".site-message").addClass("show")},1e3),console.log("Menu script Install"),q=38,H=40,M=37,j=39,N=["liveuat","uat","dev","demo"],O=["isBrowser","isMacOSApp","isIpadApp","isAndroidTabletApp","isAndroidTvBrowser","isPcApp"],$(function(){$(".main-button, .room-info").on("click",function(){Y.play("coverflow-click"),setTimeout(()=>i.remove(),500),s.remove(),z(),$.get(r+"/html/gui.html").then(function(e){a.append(e),$('<link rel="stylesheet" type="text/css" href="/css/game.css"/>').appendTo($("head"))}),v.addClass(N[2]+" "+O[5]),v.removeClass("play-button-hover"),l.css({display:"block"}),$(".cookie-notice").remove(),setTimeout(K,1e3),setTimeout(Q,2e3),setTimeout(G,2e3),setTimeout(W,2e3)})}),console.log("APPLICATION Install")}Date.now||(Date.now=function(){return(new Date).getTime()}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),JustDanceGame();