Date.now||(Date.now=function(){return(new Date).getTime()}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}();const jsonDate=(new Date).toJSON(),backToDate=new Date(jsonDate);function uuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}function JustDanceGame(){var e,o,t="0.2.2",f=$("html"),s=$("head"),a=$("body"),n=$("#landing"),i=$(".landing__content"),c=($("#second-screen"),$(".init-spinner--splash"),$(".site-message")),_=$("#settings"),w=$("#landing-admin-menu"),l=$(".new-features"),d=$("#landing-modal"),r=$(".room-info"),p=$("#coverflow"),h=!0,u="http://127.0.0.1:5500",m="https://cdn.glitch.global/2adec185-ab6f-4021-8ea5-7def5fae509c",b="visible",v="hidden",g=document.documentElement,k=Date.now();$("<script>const select=document.querySelector('select');const allLang=['en','ru','fr','ja'];select.addEventListener('change',changeURLLanguage);function changeURLLanguage(){let lang=select.value;location.href=window.location.pathname+'#'+lang;location.reload()}let hash=window.location.hash;hash=hash.substr(1);console.log('lang: '+hash);if(!allLang.includes(hash)){location.href=window.location.pathname+'#en';location.reload()}localStorage.setItem('lang',hash);select.value=hash;$('html').attr('lang',hash); <\/script>").appendTo(s),!0===(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(f.addClass("mobile"),f.attr("device","mobile"),!0):(f.addClass("desktop"),f.attr("device","desktop"),!1))&&(e=$('<div class="pop-up__wrapper pop-up--hidden"><div class="pop-up"><h1 class="pop-up__title"></h1><p class="pop-up__content">loc[4140]</p><div class="pop-up__footer"><button class="pop-up__btn pop-up__btn--cancel">loc[NO]</button> <button class="pop-up__btn pop-up__btn--validate">loc[YES]</button><div class="pop-up__timer"></div></div></div></div>'),$(".pop-up__wrapper"),(o=$(".pop-up")).find(".pop-up__title"),o.find(".pop-up__content"),$(".pop-up__btn--cancel"),$(".pop-up__btn--validate"),$(".pop-up__timer"),e.appendTo(n),f.addClass("popUp-noSupport"),$(".pop-up__wrapper").addClass("landing-popUp-noSupport").removeClass("pop-up--hidden"),$(".pop-up").addClass("landing-popUp-noSupport"),$(".pop-up__content").html(loc[347][hash]),$(".pop-up__btn--cancel").html(loc[348][hash]),$(".pop-up__btn--validate").html("OK"),$(".pop-up__btn--validate").on("click",function(){$(".pop-up__wrapper").hide(),f.removeClass("popUp-noSupport")}),$("button.main-button").remove(),r.hide()),function(){localStorage.setItem("currentBannerTime",k),localStorage.setItem("bootTime",jsonDate);var t=$('<link rel="stylesheet" type="text/css" href="https://spice-marsh-haircut.glitch.me/css/static_pageV1.css"/>'),s=$('<script src="https://spice-marsh-haircut.glitch.me/js/maintenance.js"/>');$.getJSON(u+"/v1/maintenance",function(e){$.each(e,function(e,o){k<o.startTime&&(a.attr("remove",!0),n.remove(),c.remove(),t.appendTo(a),s.appendTo(a))})})}();var y=$(".landing-text__title"),C=$(".landing-text__subtitle"),s=$(".main-button span");y.html(loc[165][hash]),C.html(loc[166][hash]),s.html(loc[168][hash]);var S,T,L,U,I,x,D,E,F,M,j,q,A,O,H,J,N=new Howl({src:[m+"/UI_Search_a01.wav"]}),R=(new Howl({src:[m+"/UI_Lobby_ContinueDance.wav"]}),new Howl({src:[m+"/Jingle_JDMainMenu.wav"]}),new Howl({src:[m+"/UI_CoverFlow_Enter.wav"]}),new Howl({src:[m+"/UI_Snap_01.wav"]})),B=new Howl({src:[m+"/UI_Snap_Back_01.wav"]}),P=new Howl({src:[m+"/UI_TransitionPage.wav"]}),s="sfx-sprite",K=new Howl({src:[m+"/"+s+".ogg",m+"/"+s+".mp3"],sprite:{"dance-transition-in":[0,3e3],"dance-transition-out":[3e3,2e3],"goldmove-intro":[4999,1729],goldmove:[6729,1683],"unlock-game":[8982,2410],"coach-selected-1":[11403,1067],"coach-selected-2":[12472,1067],"coach-selected-3":[13543,1067],"coach-selected-4":[14614,1067],"coach-selected-5":[15685,1067],"coach-selected-6":[16752,1066],"crowd-cheering":[17818,2957],"crowd-sad":[20775,1471],"coverflow-whoosh":[21854,1715],"coverflow-right":[23584,250],"coverflow-left":[23857,277],"avatar-appears-1":[24135,648],"avatar-appears-2":[24783,720],"avatar-appears-3":[25503,696],"avatar-appears-4":[26199,696],"flag-appears-1":[26895,528],"flag-appears-2":[27423,504],"flag-appears-3":[27927,504],"flag-appears-4":[28431,432],"coach-selection":[28863,2952],"ghost-planet-appears":[31815,1920],"score-count":[33735,5586],"after-dance-jingle":[39322,5856],"after-dance-winner":[45178,6624],"star-1":[51802,2040],"star-2":[53842,2040],"star-3":[55882,2040],"star-4":[57922,2544],"star-5":[60466,3048],snap:[63514,550],"coverflow-click":[64074,106],"coach-leave-1":[64190,920],"config-window-open":[65110,465],"config-window-close":[65592,225],"connect-info-pannel":[65834,666]},onload:function(){console.log("Audio SFX sprite has been successfully loaded")},onloaderror:function(){console.log("An error with Howler has occured ")}});function X(){B.play(),f.removeClass("dialog").removeClass("modalActive"),d.removeClass(b).hide(),D.removeClass(b)}function Y(){var e;!1===h?function(){$('<div class="init-spinner--splash"><div class="splash-logo"></div><div class="splash-coaches"><div class="splash-coach-1 splash-coach-div"></div><div class="splash-coach-2 splash-coach-div"></div><div class="splash-coach-3 splash-coach-div"></div><div class="splash-coach-4 splash-coach-div"></div></div><div class="init-spinner"></div></div>');var e=$('<div class="init-spinner--splash"><div class="splash-logo"></div><div class="init-spinner"></div></div>');e.appendTo($("body")),e.appendTo(a).delay(2500).show(function(){e.remove()})}():(e=$('<div class="init-spinner--splash"><div class="init-spinner__spinner"></div></div>')).appendTo(a).delay(2500).show(function(){e.remove()})}function z(){var e,o,t,s,a,n,i,c,l={width:g.innerWidth,height:g.innerHeight};s=(o=l.width)/(t=l.height),(e=16/9)<s?(a=l.height,n=0,i=Math.round(t*e),c=Math.floor((o-i)/2)):(i=l.width,c=0,a=Math.round(o/e),n=Math.floor((t-a)/2)),$("#just-dance-now").css({width:i,marginLeft:c,height:a,marginTop:n}),$("html").css({fontSize:Math.round(i/1280*125)}),this.containerScale=i/1920,g.onresize=z}function G(){const t=document.querySelectorAll(".song");t.forEach(function(o){o.addEventListener("click",function(){K.play("coverflow-click");let e=o;t.forEach(function(e){e.classList.remove("song--focused")}),e.classList.add("song--focused")})})}function Q(){f.addClass("state-songselection"),$.getJSON(u+"/v1/songs/published",function(e){var t="";$.each(e,function(e,o){t+='                    <div class="song '+o.id+'">                    <div class="song__decoration song__tag">                    <img class="song__cover" src="'+o.base+"/assets/web/"+o.id.toLowerCase()+'_small.jpg">                    </div>                    <div class="title-container">                    <div class="caption title">'+o.name+'</div>                    <div class="caption artist">'+o.artist+"</div>                    </div>                    </div>"}),$.each(e,function(e,o){$(".song-cover--hi-res").css("background-image","url("+o.base+"/assets/web/"+o.id.toLowerCase()+".jpg)"),$(".song-cover--low-res").css("background-image","url("+o.base+"/assets/web/"+o.id.toLowerCase()+"_small.jpg)")}),$(".songlist--x").html(t),$(".category").attr("data-name","WEB PLAYLIST TEST");var o=0;$(document).keydown(function(e){switch(e.keyCode){case q:0<o&&$(".song").addClass("top");break;case A:o<52&&$(".song").addClass("bottom");break;case O:K.play("coverflow-left"),o--,$(".song").removeClass("song--focused"),document.querySelector(".song:nth-child("+-o+")").classList.add("song--focused");break;case H:K.play("coverflow-right"),o++,$(".song").removeClass("song--focused"),document.querySelector(".song:nth-child("+ +o+")").classList.add("song--focused")}})}),p.addClass(b)}"0.2.2"===t?(F=$('<div class="new_update"><div class="message">'+("New update "+t+" is out. Please update the Just Dance Now app on your device!")+"</div></div>")).appendTo(i):console.log("The message is not shown"),!0===h&&F.addClass("animation-stop"),!0===h&&(f.addClass("weak"),$(".preload-assets").remove()),function(){$(".room-info span").html(loc[167][hash]);var e=(o=22,e=9999,Math.floor(Math.random()*(e-o+1)+o));document.getElementById("room-number").innerHTML=e,console.log("room number: "+e),new QRCode(document.getElementById("room-qrcode"),{text:u+":80/r?r="+e,width:112,height:112,colorDark:"#800080",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.L}),localStorage.setItem("roomNr",e);var o={value:"s="+e+"~hmac="+md5(e),expires:k};localStorage.setItem("room",JSON.stringify(o)),e={value:"s=EUS"+uuidv4()+"~hmac="+md5("EUS="+e),expires:k},localStorage.setItem("screen",JSON.stringify(e))}(),function(){var e=$(".new-features"),o='<div class="game-description">';o+='<div class="title">',o+="<span></span>",o+="</div>",o+='<div class="content"></div>',o+="</div>",o+='<div class="button__close">X</div>',e.html('<div class="game-description"><div class="title"><span></span></div><div class="content"></div></div><div class="button__close">X</div>');var t=e.find(".title"),o=e.find(".content");t.html(loc[313][hash]),o.html(loc[314][hash]),e.find(".button__close"),l.remove()}(),function(){$('<div class="pop-up">                                <div class="message__content">                                    <p>'+loc[315][hash]+'</p>                                </div>                                <div class="close__button">OK</div>                            </div>').appendTo(a);var e=$(".pop-up");$(".message__content"),$(".message__content p"),$(".close__button").on("click",function(){e.removeClass(b).addClass(v)})}(),function(){var o=!1,e=$("#landing-admin-menu"),t=$(".menu__header"),s=e.find(".close"),a=t.find(".title h1"),n=$(".language-changer .title"),i=(h=$(".graphics-changer")).find(".title"),c=h.find('option[value="high"]'),l=h.find('option[value="medium"]'),d=h.find('option[value="low"]'),r=(u=$(".full-screen")).find(".title"),p=u.find(".check"),t=(e=$("a.legacy-item")).find(".authors"),h=e.find(".license"),u=e.find(".faq"),e=$(".social-links").find(".menu__txt");function m(){B.play(),f.removeClass("dialog"),w.hide().removeClass(b)}a.html(loc[319][hash]),n.html(loc[320][hash]),i.html(loc[321][hash]),c.html(loc[322][hash]),d.html(loc[323][hash]),l.html(loc[324][hash]),r.html(loc[330][hash]),p.html(loc.on[hash]),t.html(loc[336][hash]),h.html(loc[337][hash]),u.html(loc[338][hash]),e.html(loc[350][hash]),_.on("click",function(){o=!0,R.play(),P.play(),f.addClass("dialog"),w.show().addClass(b)}),s.on("click",function(){o=!1,m()}),$(document).keydown(function(e){27===e.keyCode&&!0===o&&(o=!1,m())});var v=document.documentElement,g=!1;$(".full-screen .check").on("click",function(){!1===g?(v.requestFullscreen?v.requestFullscreen():v.webkitRequestFullscreen?v.webkitRequestFullscreen():v.msRequestFullscreen&&v.msRequestFullscreen(),g=!0,document.querySelector(".fullscreen-toggle").classList.add("active")):(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),g=!1,document.querySelector(".fullscreen-toggle").classList.remove("active")),f.toggleClass("full-screen")})}(),S=!1,T=$("#landing-modal"),L=$(".modal__header"),U=$(".help__tutorial"),I=L.find(".title"),x=T.find(".close"),D=T.find(".modal_position"),E=T.find(".modal_position_1"),F=T.find(".modal_position_1 .modal_description"),M=T.find(".modal_position_2"),L=T.find(".modal_position_2 .modal_description"),j=T.find(".modal_position_3"),T=T.find(".modal_position_3 .modal_description"),U.html(loc[340][hash]),I.html(loc[331][hash]),F.html(loc[332][hash]),L.html(loc[333][hash]),T.html(loc[334][hash]),U.on("click",function(){S=!0,N.play(),R.play(),f.addClass("modalActive"),d.addClass(b).show(),setTimeout(()=>$(function(){E.addClass(b),P.play()}),500),setTimeout(()=>$(function(){M.addClass(b),P.play()}),1e3),setTimeout(()=>$(function(){j.addClass(b),P.play()}),1500)}),x.on("click",function(){S=!1,X()}),$(document).keydown(function(e){27===e.keyCode&&!0===S&&(S=!1,X())}),$(".main-button").hover(function(){f.addClass("play-button-hover")},function(){f.removeClass("play-button-hover")}),setTimeout(function(){$('<div class="cookie-wrapper"><div class="cookie-content"></div><div class="cookie-close"><button class="cookie-close-btn">OK</button></div></div>').appendTo(".site-message"),!1===s&&$(".site-message").addClass("show"),$(".site-message").addClass("cookie-notice");var e=$(".cookie-notice"),o=$(".cookie-content"),t=$(".cookie-close .cookie-close-btn");o.html(loc[341][hash]),localStorage.setItem("cookieAccept","false");var s=!1;t.on("click",function(){localStorage.setItem("cookieAccept","true"),$.cookie("cookieAccept","true",{expires:3,path:"/"}),s=!0,e.remove()}),$(".main-button").on("click",function(){localStorage.setItem("cookieAccept","true"),$.cookie("cookieAccept","true",{expires:3,path:"/"}),s=!0,e.remove()})},1e3),q=38,A=40,O=37,H=39,J=$('<script type="text/javascript" src="/dist/js/game.js" async><\/script>'),$(function(){$(".main-button, .room-info").on("click",function(){K.play("coverflow-click"),setTimeout(()=>n.remove(),500),setTimeout(()=>$("#second-screen").remove(),500),$.get(u+"/html/gui.html").then(function(e){a.append(e),$('<link rel="stylesheet" type="text/css" href="/css/game.css"/>').appendTo($("head"))}),f.removeClass("play-button-hover"),p.css({display:"block"}),$(".cookie-notice").remove(),Y(),setTimeout(Q,1e3),setTimeout(G,2e3),setTimeout(z,2e3),setTimeout(J.appendTo($("body")),2e3)})})}JustDanceGame();